<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>전국 치매안심센터 지도</title>
  <style>
    #map {
      width: 100%;
      height: 700px;
    }
  </style>
  <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=b08bb0d7029cff05ee0ab4ab533493ce"></script>
</head>
<body>
  <h1>전국 치매안심센터 지도</h1>
  <div id="map"></div>

  <script>
    // 1. 카카오 지도 기본 설정
    const mapContainer = document.getElementById('map');
    const mapOption = {
      center: new kakao.maps.LatLng(36.5, 127.5), // 대한민국 중심
      level: 7
    };
    const map = new kakao.maps.Map(mapContainer, mapOption);

    // 2. JSON 데이터 로드
    fetch('./center_data.json')
      .then(response => response.json())
      .then(data => {
        data.forEach(center => {
          const lat = parseFloat(center.latitude);
          const lng = parseFloat(center.longitude);
          const name = center.cnterNm;
          const addr = center.rdnmadr;
          const phone = center.operPhoneNumber;

          // 3. 마커 생성
          const markerPosition = new kakao.maps.LatLng(lat, lng);
          const marker = new kakao.maps.Marker({
            position: markerPosition,
            map: map
          });

          // 4. 인포윈도우 생성
          const infoContent = `
            <div style="padding:5px; font-size:13px;">
              <strong>${name}</strong><br>
              ${addr}<br>
              ${phone}
            </div>
          `;
          const infowindow = new kakao.maps.InfoWindow({
            content: infoContent
          });

          // 마커 클릭 시 인포윈도우 표시
          kakao.maps.event.addListener(marker, 'click', function() {
            infowindow.open(map, marker);
          });
        });
      })
      .catch(error => console.error("JSON 로드 실패:", error));
  </script>
</body>
</html>
