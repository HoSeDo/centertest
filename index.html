<!DOCTYPE html>
<html lang="ko">
<head>
   <meta charset="UTF-8" />
  <title>ì „êµ­ ì¹˜ë§¤ì•ˆì‹¬ì„¼í„°</title>
</head>
<body>
  
<div id="map" style="width:100%;height:500px;"></div>

<!-- ì¹´ì¹´ì˜¤ ì§€ë„ API ìŠ¤í¬ë¦½íŠ¸ -->
<script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=b08bb0d7029cff05ee0ab4ab533493ce"></script>

<script>
  // ê³µê³µë°ì´í„°í¬í„¸ API í˜¸ì¶œ
  fetch('http://api.data.go.kr/openapi/tn_pubr_public_imbclty_cnter_api') // ì‹¤ì œ API ì£¼ì†Œì™€ ì¸ì¦í‚¤ í¬í•¨í•´ì•¼ í•¨
  const serviceKey = 'PGaRDR11RPT4oGwm0d1zVinIrqETQaNooSxuLuV5C56uqGE%2Bcdg1Scr5ZMaWaGcNAXG1v9K1JYgpU8z3SzZoOQ%3D%3D'
    .then(response => response.json())
    .then(data => {
      const container = document.getElementById('map');
      const options = {
        center: new kakao.maps.LatLng(37.5665, 126.9780), // ì´ˆê¸° ì§€ë„ ì¤‘ì‹¬ ì¢Œí‘œ (ì„œìš¸ ì‹œì²­ ê¸°ì¤€)
        level: 5
      };
      const map = new kakao.maps.Map(container, options);

      // JSON ì‘ë‹µ êµ¬ì¡°ì— ë”°ë¼ ê²½ë¡œ ì¡°ì • í•„ìš”í•  ìˆ˜ ìˆìŒ
      const items = data.items || data.response?.body?.items?.item; // ë³´í†µ êµ¬ì¡° í™•ì¸ í•„ìš”

      items.forEach(item => {
        // êµ¬ì¡° ë¶„í•´ë¡œ í•„ìš”í•œ í•„ë“œ ì¶”ì¶œ
        const {
          cnterNm,         // ì„¼í„° ì´ë¦„
          rdnmadr,         // ë„ë¡œëª… ì£¼ì†Œ
          latitude,        // ìœ„ë„
          longitude,       // ê²½ë„
          operPhoneNumber  // ì „í™”ë²ˆí˜¸
        } = item;

        // ìœ„ë„/ê²½ë„ ìˆ«ì ë³€í™˜ (ë¬¸ìì—´ì¼ ìˆ˜ ìˆìŒ)
        const lat = parseFloat(latitude);
        const lng = parseFloat(longitude);

        // ìœ íš¨ ì¢Œí‘œë§Œ ì²˜ë¦¬
        if (!isNaN(lat) && !isNaN(lng)) {
          const markerPosition = new kakao.maps.LatLng(lat, lng);
          const marker = new kakao.maps.Marker({
            position: markerPosition,
            map: map
          });

          const infowindow = new kakao.maps.InfoWindow({
            content: `
              <div style="padding:5px; font-size:13px;">
                <strong>${cnterNm}</strong><br/>
                ${rdnmadr}<br/>
                ğŸ“ ${operPhoneNumber}
              </div>
            `
          });

          kakao.maps.event.addListener(marker, 'click', function () {
            infowindow.open(map, marker);
          });
        }
      });
    })
    .catch(error => {
      console.error('ê³µê³µë°ì´í„° API ì˜¤ë¥˜:', error);
    });
</script>
</body>
